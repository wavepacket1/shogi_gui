# フェーズ2: バックエンド API 設計書

## 概要
- モード切替機能に必要なバックエンド API を実装します。
  - ゲームモード変更エンドポイント
  - 分岐管理・コメント機能

## 参照設計
- `api_design.md`                    : API エンドポイント仕様
- `database_design.md`              : DB カラム設計

## 実装タスク
1. ルーティング定義（`config/routes.rb`）にモード切替・コメント追加を追加
2. `GamesController` にモード変更アクション（`update mode`）を実装
3. コメント機能用のコントローラアクション実装（`CommentsController`）
4. バリデーションロジックの実装（`GameMode`, `Position` 等）
5. rswag を使った Swagger 定義の更新・Swaggerize 実行
6. RSpec リクエストスペックの作成・実行

## テスト要件
- 正常系：ゲームモード変更とコメント取得/追加が仕様通りに 200 レスポンスを返す
- 異常系：不正リクエスト・存在しないリソースで 400/404/405/409 を返す